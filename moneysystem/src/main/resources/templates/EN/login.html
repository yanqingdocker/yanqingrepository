<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"  content="width=device-width, user-scalable=no, initial-scale=1.0,maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
    <title>Login Page</title>
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="/css/base.css"/>
    <link rel="stylesheet" type="text/css" href="/css/css.css"/>
    <link  rel="stylesheet" type="text/css"  href="/css/sweet-alert.css"/>
    <script  type="text/javascript" src="/js/jquery1.12.4.js"></script>
    <script  type="text/javascript" src="/js/bootstrap.min.js"></script>
    <script  type="text/javascript" src="/js/bootstrapValidator.min.js"></script>
    <script  type="text/javascript" src="/js/sweet-alert.min.js"></script>
    <script  type="text/javascript" src="/js/common.js"></script>
    <!--[if lte IE 9]>
    <script  type="text/javascript" src="/js/html5.min.js"></script>
    <script  type="text/javascript" src="/js/respond.min.js"></script>
    <![endif]-->
</head>
<body class="login_bg">
<div class="m " style="width: 455px;margin-top: 6%">
    <div class="login_logo tc"><img src="/images/logo.png" ></div>
    <div class="w100 inblock">
        <form id="registerForm">
            <div class="login_form">
                <div class="form-group  login_input mb15">
                    <i class="icon user"></i>
                    <input type="text" class="form-control" name="telphone" id="Telephone" placeholder="Phone Number" onkeydown="javascript: if(event.keyCode == 13) save();"/>
                </div>
                <div class="form-group login_input mb15">
                    <i class="icon password"></i>
                    <input type="password" class="form-control" name="password" onkeydown="javascript: if(event.keyCode == 13) save();"  placeholder="Password"/>
                </div>
                <div class="w100 inblock ">
                    <div class="l ">
                        <!--<div class="custom-control custom-checkbox">-->
                        <!--<input type="checkbox" class="custom-control-input" name="RememberMe" id="customCheck1" >-->
                        <!--<label class="custom-control-label white"  for="customCheck1">记住密码</label>-->
                        <!--</div>-->
                    </div>
                    <div class="r">
                        <a href="/EN/find_psw" class="white">Forget Password</a><span class="white mr5 ml5">|</span><a href="/EN/register" class="white">Registered</a>
                    </div>
                </div>
                <div class="bs-component mt10"><button type="button"  class="btn btn-primary btn-lg btn-block red_bg register_btn" id="saveID" onclick="save()">Sign In</button></div>

            </div>
        </form>

    </div>
    <p class="tc mt30 g9">© 2018 Copyright Southern International Currency Exchange</p>
    <p class="tc g9 pb20"> Customer service hotline:+8550968888088</p>
</div>


<script type="text/javascript">

    function save() {
        // $('#registerForm').data('bootstrapValidator').enableFieldValidators('telphone', true);
        // $('#registerForm').data('bootstrapValidator').enableFieldValidators('password', true);
        // $('#registerForm').data('bootstrapValidator').validate();//手动对表单进行校检
        // if (!$('#registerForm').data('bootstrapValidator').isValid()) {//判断校检是否通过
        //     return;
        // } else {
            $.ajax({
                type: "post", // 用POST方式传输
                dataType: 'json',
                url: "/user/login", // 目标地址
                data:  $("#registerForm").serialize(),
                error: function (data) {
                    sweetAlert("", "Request failed", "error");
                },
                success: function (data) {
                    if (data.code=="fail") {
                        sweetAlert("", data.message, "error");
                        // $('#loginbtn').prop('disabled', false);
                    }
                    else {
                        sweetAlert({
                                title: "Landed successfully",
                                text: "Jump automatically after 1 second",
                                type: "success",
                                showConfirmButton: false
                            },
                            function(isConfirm){
                                if (isConfirm) {
                                    window.location.href = "/EN/index";
                                }
                            });
                        setTimeout(function(){ window.location.href = "/EN/index";},1000);
                    }
                }
            })
        // }
    }
    // $(function () {
    //     $('#registerForm').bootstrapValidator({
    //         feedbackIcons: {
    //             //valid: 'glyphicon glyphicon-ok',
    //             //invalid: 'glyphicon glyphicon-remove',
    //             validating: 'glyphicon glyphicon-refresh'
    //         },
    //         fields: {
    //             'telphone': {
    //                 message: 'please enter a valid phone number',
    //                 validators: {
    //                     notEmpty: {
    //                         message: 'Phone number cannot be empty'
    //                     },
    //                     regexp: {
    //                         regexp: /^1[356789][0-9]{9}$/,
    //                         message: 'please enter a valid phone number'
    //                     }
    //                 }
    //             },
    //             'password': {
    //                 validators: {
    //                     notEmpty: {
    //                         message: 'The password can not be empty'
    //                     },
    //                     stringLength: {
    //                         /*长度提示*/
    //                         min: 6,
    //                         max: 30,
    //                         message: 'The password length must be between 6 and 30'
    //                     },
    //                     regexp: {
    //                         regexp: /^[a-zA-Z0-9_\.]+$/,
    //                         message: 'A password is made up of numeric letters and points'
    //                     }
    //                 }
    //             }
    //         }
    //     })
    //
    // })


</script>


</body>
</html>